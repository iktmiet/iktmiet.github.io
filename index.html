<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <!-- –®–†–ò–§–¢–´ -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600&display=swap">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">  
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <title>–°–µ—Å—Å–∏—è | –ò–ö–¢-11 –ú–ò–≠–¢</title>
    
        <!-- PWA -->
        <link rel="manifest" href="manifest.json">
        <link rel="import" href="meta.html">

        <!-- –°–¢–ò–õ–ò -->
        <link rel="stylesheet" href="styles/main.css" />
        <link rel="stylesheet" href="styles/legend.css" />
        <link rel="stylesheet" href="styles/schedule.css" />
        <link rel="stylesheet" href="styles/blocks.css">

        <!-- –°–ö–†–ò–ü–¢–´ -->
        <script src="scripts/stories.js"></script>
        <script src="scripts/global_stories.js"></script>

        <!-- –ò–ö–û–ù–ö–ê -->
        <link rel="icon"          type="image/x-icon" href="./icons/logo.ico">
        <link rel="shortcut icon" type="image/x-icon" href="./icons/logo.ico">
    </head>

    <body>
        <!-- ------ -->
        <!-- –•–ï–ê–î–ï–† -->
        <!-- ------ -->

        <header>
            <h1 style="color:#ffd0d0">–°–µ—Å—Å–∏—è</h1>

            <!-- –ö–Ω–æ–ø–∫–∏ (–≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫) -->

            <div class="button-container">
                <button id="numeratorBtn" class="active-button" onclick="changeSchedule('numerator')">
                    <span style="display:none" id="numeratorCircle" class="num-notification"></span>
                    –ó–∞—á—ë—Ç—ã, –ø–µ—Ä–µ—Å–¥–∞—á–∏
                </button>

                <button id="denominatorBtn" class="inactive-button" onclick="changeSchedule('denominator')">
                    <span style="display:none" id="denominatorCircle" class="den-notification"></span>
                    –≠–∫–∑–∞–º–µ–Ω—ã
                </button>
            </div>

            <!-- –†–ê–ó–î–ï–õ–ò–¢–ï–õ–¨ -->

            <br />

            <!-- –ö–Ω–æ–ø–∫–∏ (–Ω–∏–∂–Ω–∏–π –±–ª–æ–∫) -->

            <button id="booksBtn" style="margin-right: 5px; margin-bottom: 10px;" class="additional-button" onclick="redirectToBooksPage()">
                üìö
                <script>
                    function redirectToBooksPage() {
                        window.location.href = 'books';
                    }
                </script>
            </button>

            <button id="linksBtn" style="margin-right: 5px; margin-bottom: 10px;" class="additional-button" onclick="redirectToLinksPage()">
                üîó
                <script>
                    function redirectToLinksPage() {
                        window.location.href = 'links';
                    }
                </script>
            </button>

            <button id="candleBtn" style="margin-right: 5px; margin-bottom: 10px;" class="additional-button" onclick="redirectToCandlePage()">
                üïØÔ∏è
                <script>
                    function redirectToCandlePage() {
                        window.location.href = 'https://new.online-chasovnya.ru/svechi-online/index.html';
                    }
                </script>
            </button>

            <button 
                id="todayBtn" 
                style="margin-right:0px; margin-bottom: 10px;" 
                class="additional-button" 
                onclick="goToCurrentDay();"
            >
                –°–µ–≥–æ–¥–Ω—è

                <script>
                    function goToCurrentDay() {
                        // –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –¢–ï–ö–£–©–ï–ì–û –î–ù–Ø –ù–ï–î–ï–õ–ò
                        var day = new Date().getDate();
                        var anchorId = day;
						
						console.log(anchorId);

                        document.getElementById(anchorId).scrollIntoView({ behavior: 'smooth' });
                    }
                </script>
            </button>

        </header>

        
        <!-- –õ–ï–ì–ï–ù–î–ê -->
        <!-- –û –ë–û–ì–ò–ù–ï –ú–ï–ß–ï–ô-->

        <div class='my-legend' style="margin-top: 15px;">
            <div class='legend-scale'>
                <ul class='legend-labels'>
                    <li><span style='background:var(--event);'></span><b id="weekLegend">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏... –û–±–æ–∂–¥–∏—Ç–µ...</b></li>
                </ul>
            </div>
        </div>


        <!-- -------------- -->
        <!--   –†–ê–°–ü–ò–°–ê–ù–ò–ï   -->
        <!-- -------------- -->
        <!--    –ß–ò–°–õ–ò–¢–ï–õ–¨   -->
        <!-- -------------- -->

        <script src="scripts/global_numerator_schedule.js"></script>
        <script>
            var numeratorSchedule = NUMERATOR_SCHEDULE;
        </script>

        <!-- -------------- -->
        <!--   –ó–ù–ê–ú–ï–ù–ê–¢–ï–õ–¨  -->
        <!-- -------------- -->

        <script src="scripts/global_denominator_schedule.js"></script>
        <script>
            var denominatorSchedule = DENOMINATOR_SCHEDULE;
        </script>

        <!-- ----------------- -->
        <!--     –°–ö–†–ò–ü–¢ –î–õ–Ø    -->
        <!--     –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø   -->
        <!--   –¢–ï–ö–£–©–ï–ô –ù–ï–î–ï–õ–ò  -->
        <!-- ----------------- -->

        <script src="scripts/getCurrentWeek.js"></script>
        <script>document.addEventListener("DOMContentLoaded", function() {getCurrentWeek();});</script>

        <!-- ----------------- -->
        <!--   –û–¢–û–ë–†. –õ–ï–ì–ï–ù–î–´  -->
        <!-- ----------------- -->

        <div class='my-legend'>
            <div class='legend-scale'>
                <ul class='legend-labels'>
                    <li><span style='background:var(--lecture);'></span>–≠–∫–∑–∞–º–µ–Ω</li>
                    <li><span style='background:var(--practice);'></span>–ö–æ–Ω—Å.</li>
                    <li><span style='background:var(--seminar);'></span>–ó–∞—á—ë—Ç</li>
                    <li><span style='background:var(--event);'></span>–°–µ–º.</li>
                    <li><span style='background:var(--lab);'></span>–ü–µ—Ä–µ—Å–¥.</li>
                </ul>
            </div>
        </div>
        
        <!-- ----------------- -->

        <!--  –ë–õ–û–ö –†–ê–°–ü–ò–°–ê–ù–ò–Ø  -->

        <!-- ----------------- -->
            <!-- ----------------- -->
            <!--     –†–ê–°–ü–ò–°–ê–ù–ò–ï    -->
            <!--     –ù–ê –ù–ï–î–ï–õ–Æ     -->
            <!-- ----------------- -->
            <div id="scheduleContainer" class="schedule-container">
            </div>

            <script>
                // –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
                function changeSchedule(scheduleType) {
                    // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–Ω–æ–ø–æ–∫
                    var numeratorBtn = document.getElementById("numeratorBtn");
                    var denominatorBtn = document.getElementById("denominatorBtn");
                    var scheduleContainer = document.getElementById("scheduleContainer");
                    
                    // 18-19 –Ω–µ–¥–µ–ª–∏
                    if (scheduleType === 'numerator') {
                        numeratorBtn.classList.remove("inactive-button");
                        numeratorBtn.classList.add("active-button");
                        denominatorBtn.classList.remove("active-button");
                        denominatorBtn.classList.add("inactive-button");
                        
                        scheduleContainer.innerHTML = numeratorSchedule;

                    // —ç–∫–∑–∞–º–µ–Ω—ã
                    } else if (scheduleType === 'denominator') {
                        numeratorBtn.classList.remove("active-button");
                        numeratorBtn.classList.add("inactive-button");
                        denominatorBtn.classList.remove("inactive-button");
                        denominatorBtn.classList.add("active-button");

                        scheduleContainer.innerHTML = denominatorSchedule;
                    }
                }
            </script>
        </div>


        <!-------------->
        <!-- –ê–ù–ï–ö–î–û–¢–´ -->
        <!-------------->

        <div class="schedule-container">
            <div class="day-block" style="background-color: #212121;">
                <div class="day-title" style="background-color: #2a2a2a;">–ê–ù–ï–ö–î–û–¢ –î–ù–Ø</div>
                <div class="class-item practice">
                    <div id="anekdotText">
                        –ò—â–µ–º –¥–ª—è –≤–∞—Å —Å–∞–º—ã–π —Å–º–µ—à–Ω–æ–π –∞–Ω–µ–∫–¥–æ—Ç –¥–Ω—è...
                    </div>
                </div>
            </div>
        </div>

        <script>
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∞–Ω–µ–∫–¥–æ—Ç–∞
            function loadRandomAnekdot() {
                // API –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
                var apiUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://www.anekdot.ru/rss/export_j.xml');

                // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–Ω–µ–∫–¥–æ—Ç–æ–≤ –∏–∑ RSS
                        var parser = new DOMParser();
                        var xmlDoc = parser.parseFromString(data.contents, 'text/xml');
                        var items = xmlDoc.getElementsByTagName('item');
                        
                        // –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∞–Ω–µ–∫–¥–æ—Ç–∞
                        var randomIndex = Math.floor(Math.random() * items.length);
                        var randomAnekdot = items[randomIndex].getElementsByTagName('description')[0].textContent;

                        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∞–Ω–µ–∫–¥–æ—Ç–∞
                        document.getElementById('anekdotText').innerHTML = randomAnekdot;
                    })
                    .catch(error => console.error('ü•∫ –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–µ–∫–¥–æ—Ç–æ–≤:', error));
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∞–Ω–µ–∫–¥–æ—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('load', loadRandomAnekdot);
        </script>

        <!-- –†–ê–î–ò–û -->

        <div class="id-container">
            <!-- –†–ê–î–ò–û –†–ï–°–ü–£–ë–õ–ò–ö–ê -->
            <div class="id-block">
                <div class="id-title">
                    <img src="https://top-radio.pro/assets/image/radio/180/radio-respublika-lnr.jpg" loading="lazy" width="25" height="25" style="border-radius: 50%;">
                    <span>–†–∞–¥–∏–æ –†–ï–°–ü–£–ë–õ–ò–ö–ê</span>
                </div>

                <div class="id-item" style="padding:15px;">
                    <audio id="rep_radio-player" src="https://radio.gtrklnr.ru:8443/republic.fm" preload="auto"></audio>

                    <button id="rep_play-btn" style="margin:10px;" class="inactive-button">–°–ª—É—à–∞—Ç—å</button>
                    <button id="rep_stop-btn" style="margin:10px;display: none;" class="active-button" disabled="">–°—Ç–æ–ø</button>
                    
                    <input id="rep_volume-slider" style="margin-left: 10px;" type="range" min="0" max="1" step="0.01" value="0.5">
                    
                    <script>
                    const rep_audio = document.getElementById('rep_radio-player');
                    const rep_playBtn = document.getElementById('rep_play-btn');
                    const rep_stopBtn = document.getElementById('rep_stop-btn');
                    const rep_volumeSlider = document.getElementById('rep_volume-slider');
                    
                    rep_playBtn.addEventListener('click', () => {
                        rep_audio.play();
                        rep_playBtn.disabled = true;
                        rep_playBtn.style.display = "none";
                        rep_stopBtn.style.display = "block";
                        rep_stopBtn.disabled = false;
                    });
                    
                    rep_stopBtn.addEventListener('click', () => {
                        rep_audio.pause();
                        rep_playBtn.disabled = false;
                        rep_playBtn.style.display = "block";
                        rep_stopBtn.style.display = "none";
                        rep_stopBtn.disabled = true;
                    });
                    
                    rep_volumeSlider.addEventListener('input', (e) => {
                        rep_audio.volume = e.target.value;
                    });
                    </script>
                    
                    <style>
                    #volume-slider {
                        width: 100px;
                    }
                    </style>
                </div>
            </div>

            <!-- –†–ê–î–ò–û –ü–ê–ü–ò–ù–û -->
            <div class="id-block">
                <div class="id-title">
                    <img src="https://top-radio.ru/assets/image/radio/180/papino-radio.png" loading="lazy" width="25" height="25" style="border-radius: 50%;">
                    <span>–ü–ê–ü–ò–ù–û —Ä–∞–¥–∏–æ</span>
                </div>

                <div class="id-item" style="padding:15px;">
                    <audio id="pap_radio-player" src="https://a1.radioheart.ru:9001/RH53662" preload="auto"></audio>

                    <button id="pap_play-btn" style="margin:10px;" class="inactive-button">–°–ª—É—à–∞—Ç—å</button>
                    <button id="pap_stop-btn" style="margin:10px;display: none;" class="active-button" disabled="">–°—Ç–æ–ø</button>
                    
                    <input id="pap_volume-slider" style="margin-left: 10px;" type="range" min="0" max="1" step="0.1" value="1">
                    
                    <script>
                    const pap_audio = document.getElementById('pap_radio-player');
                    const pap_playBtn = document.getElementById('pap_play-btn');
                    const pap_stopBtn = document.getElementById('pap_stop-btn');
                    const pap_volumeSlider = document.getElementById('pap_volume-slider');
                    
                    pap_playBtn.addEventListener('click', () => {
                        pap_audio.play();
                        pap_playBtn.disabled = true;
                        pap_playBtn.style.display = "none";
                        pap_stopBtn.style.display = "block";
                        pap_stopBtn.disabled = false;
                    });
                    
                    pap_stopBtn.addEventListener('click', () => {
                        pap_audio.pause();
                        pap_playBtn.disabled = false;
                        pap_playBtn.style.display = "block";
                        pap_stopBtn.style.display = "none";
                        pap_stopBtn.disabled = true;
                    });
                    
                    pap_volumeSlider.addEventListener('input', (e) => {
                        pap_audio.volume = e.target.value;
                    });
                    </script>
                </div>
            </div>

            <!-- –†–ê–î–ò–û –°–¢–û–õ–ò–¶–ê -->
            <div class="id-block">
                <div class="id-title">
                    <img src="https://top-radio.ru/assets/image/radio/180/stolicha100.jpg" loading="lazy" width="25" height="25" style="border-radius: 50%;">
                    <span>–†–∞–¥–∏–æ –°—Ç–æ–ª–∏—Ü–∞ –î–æ–Ω–µ—Ü–∫</span>
                </div>

                <div class="id-item" style="padding:15px;">
                    <audio id="stl_radio-player" src="https://a1.radioheart.ru:9001/RH58197" preload="auto"></audio>

                    <button id="stl_play-btn" style="margin:10px;" class="inactive-button">–°–ª—É—à–∞—Ç—å</button>
                    <button id="stl_stop-btn" style="margin:10px;display: none;" class="active-button" disabled="">–°—Ç–æ–ø</button>
                    
                    <input id="stl_volume-slider" style="margin-left: 10px;" type="range" min="0" max="1" step="0.1" value="1">
                    
                    <script>
                    const stl_audio = document.getElementById('stl_radio-player');
                    const stl_playBtn = document.getElementById('stl_play-btn');
                    const stl_stopBtn = document.getElementById('stl_stop-btn');
                    const stl_volumeSlider = document.getElementById('stl_volume-slider');
                    
                    stl_playBtn.addEventListener('click', () => {
                        stl_audio.play();
                        stl_playBtn.disabled = true;
                        stl_playBtn.style.display = "none";
                        stl_stopBtn.style.display = "block";
                        stl_stopBtn.disabled = false;
                    });
                    
                    stl_stopBtn.addEventListener('click', () => {
                        stl_audio.pause();
                        stl_playBtn.disabled = false;
                        stl_playBtn.style.display = "block";
                        stl_stopBtn.style.display = "none";
                        stl_stopBtn.disabled = true;
                    });
                    
                    stl_volumeSlider.addEventListener('input', (e) => {
                        stl_audio.volume = e.target.value;
                    });
                    </script>
                </div>
            </div>
        </div>

        <!-- –¢–µ–∫—Å—Ç –≤ –Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->

        <div class="footer-text" style="padding-bottom: 20px;">
            –ë–ê–ó–ê –ò–ö–¢-11 | –ú–ò–≠–¢ 2024
            <br/>
            <div class="alpha50"><div id="lastUpdate"></div></div>
            <br />
            <br />
            <div id="version">–í–µ—Ä—Å–∏—è 2.X.X (...) | dev: @eagalts</div>

            <script src="scripts/global_var.js"></script>
            <script>
                document.getElementById('lastUpdate').innerHTML = `–ü–û–°–õ–ï–î–ù–ï–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï: ${appInfo.lastUpdate}`;
                document.getElementById('version').innerHTML = `ver: ${appInfo.version} | dev: @eagalts`;
            </script>
        </div>
    </body>
</html>
